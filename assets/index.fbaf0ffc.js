(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function O(){}function Mt(t){return t()}function ht(){return Object.create(null)}function W(t){t.forEach(Mt)}function Ot(t){return typeof t=="function"}function K(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Bt(t){return Object.keys(t).length===0}function m(t,e){t.appendChild(e)}function N(t,e,n){t.insertBefore(e,n||null)}function A(t){t.parentNode.removeChild(t)}function Q(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function C(t){return document.createElement(t)}function L(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function I(t){return document.createTextNode(t)}function z(){return I(" ")}function $e(){return I("")}function P(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function a(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Lt(t){return t===""?null:+t}function Pt(t){return Array.from(t.childNodes)}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function pt(t,e){t.value=e==null?"":e}function Y(t,e,n,l){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function _t(t,e,n){t.classList[n?"add":"remove"](e)}let me;function de(t){me=t}function Ft(){if(!me)throw new Error("Function called outside component initialization");return me}function Dt(t){Ft().$$.on_mount.push(t)}const ce=[],Ne=[],je=[],Ve=[],Rt=Promise.resolve();let We=!1;function Ut(){We||(We=!0,Rt.then(Tt))}function Ke(t){je.push(t)}function Gt(t){Ve.push(t)}const Ge=new Set;let Ce=0;function Tt(){const t=me;do{for(;Ce<ce.length;){const e=ce[Ce];Ce++,de(e),Ht(e.$$)}for(de(null),ce.length=0,Ce=0;Ne.length;)Ne.pop()();for(let e=0;e<je.length;e+=1){const n=je[e];Ge.has(n)||(Ge.add(n),n())}je.length=0}while(ce.length);for(;Ve.length;)Ve.pop()();We=!1,Ge.clear(),de(t)}function Ht(t){if(t.fragment!==null){t.update(),W(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ke)}}const Ae=new Set;let G;function Vt(){G={r:0,c:[],p:G}}function Wt(){G.r||W(G.c),G=G.p}function D(t,e){t&&t.i&&(Ae.delete(t),t.i(e))}function U(t,e,n,l){if(t&&t.o){if(Ae.has(t))return;Ae.add(t),G.c.push(()=>{Ae.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function Kt(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function Z(t){t&&t.c()}function H(t,e,n,l){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),l||Ke(()=>{const s=t.$$.on_mount.map(Mt).filter(Ot);t.$$.on_destroy?t.$$.on_destroy.push(...s):W(s),t.$$.on_mount=[]}),o.forEach(Ke)}function V(t,e){const n=t.$$;n.fragment!==null&&(W(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Jt(t,e){t.$$.dirty[0]===-1&&(ce.push(t),Ut(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(t,e,n,l,r,o,s,i=[-1]){const c=me;de(t);const u=t.$$={fragment:null,ctx:[],props:o,update:O,not_equal:r,bound:ht(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:ht(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};s&&s(u.root);let d=!1;if(u.ctx=n?n(t,e.props||{},(v,y,...E)=>{const b=E.length?E[0]:y;return u.ctx&&r(u.ctx[v],u.ctx[v]=b)&&(!u.skip_bound&&u.bound[v]&&u.bound[v](b),d&&Jt(t,v)),y}):[],u.update(),d=!0,W(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const v=Pt(e.target);u.fragment&&u.fragment.l(v),v.forEach(A)}else u.fragment&&u.fragment.c();e.intro&&D(t.$$.fragment),H(t,e.target,e.anchor,e.customElement),Tt()}de(c)}class q{$destroy(){V(this,1),this.$destroy=O}$on(e,n){if(!Ot(n))return O;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!Bt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const qt=55296,Xt=56320;function Je(t,e,n){let l="";e==null&&(e=0),n==null&&(n=t.length);for(let r=e;r<n;){const o=t[r++];let s;if(o<=128)s=o;else if(o>191&&o<224)s=(o&31)<<6|t[r++]&63;else if(o>239&&o<365){s=((o&7)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536;const i=qt|s>>10&1023;l+=String.fromCharCode(i),s=Xt|s&1023}else s=(o&15)<<12|(t[r++]&63)<<6|t[r++]&63;l+=String.fromCharCode(s)}return Je.bytes=n-e,l}Je.bytes=0;const Yt=t=>JSON.parse(JSON.stringify(t)),He=t=>[,"Boolean","Byte","Char","???","Decimal","Double","Int16","Int32","Int64","SByte","Single","TimeSpan","DateTime","UInt16","UInt32","UInt64","Null","String"][t],Zt=t=>["Primitive","String","Object","SystemClass","Class","ObjectArray","StringArray","PrimitiveArray"][t],Qt=t=>{let e=0;const n={},l={},r=f=>{let h=0;const g=t.slice(e,e+f);for(let p=0;p<f;++p)h+=g[p]*256**p;return e+=f,h},o=()=>r(1),s=()=>r(4),i=()=>{let f=t[e],h;for(h=0;t[e+h]>=128;++h)f^=128,f+=t[e+h+1]<<7*(h+1);const g=e+h+1,p=Je(t.slice(g,g+f));return e+=f+h+1,p},c=()=>{const f=new ArrayBuffer(4),h=new DataView(f);for(let g=0;g<4;++g)h.setUint8(3-g,t[e+g]);return e+=4,h.getFloat32(0)},u=()=>{n.serialization={},n.serialization.rootId=s(),n.serialization.headerId=s(),n.serialization.majorVersion=s(),n.serialization.minorVersion=s()},d=()=>{n.binary={},n.binary.libraryId=s(),n.binary.libraryName=i()},v=f=>{const h={};h.objectId=s(),h.objectName=i(),h.memberCount=s(),h.members=[];for(let g=0;g<h.memberCount;++g)h.members.push({name:i()});for(let g=0;g<h.memberCount;++g)h.members[g].type=Zt(o());h.members.forEach(g=>{switch(g.type){case"SystemClass":g.typeName=i();break;case"Class":g.typeName=i(),g.libraryId=s();break;case"String":case"StringArray":break;case"Primitive":case"PrimitiveArray":g.typeName=He(o());break;default:throw new Error(g.type+" not handled")}}),f||(h.libraryId=s()),h.members.forEach(g=>{if(["SystemClass","Class","StringArray","PrimitiveArray"].indexOf(g.type)>-1){const p=o();switch(p){case 9:g.refId=s();break;default:throw new Error(g.type+" <"+p.toString(16).padStart(2,"0")+"> not handled")}}else if(g.type==="Primitive")switch(g.typeName){case"Single":g.value=c();break;case"Int32":g.value=s();break;default:throw console.log(g),new Error(g.typeName+" not handled")}else if(g.type==="String"){const p={};e++,p.type="BinaryObjectString",p.objectId=s(),p.value=i(),g.refId=p.objectId,l[p.objectId]=p}else throw new Error(g.type+" not handled")}),l[h.objectId]=h},y=()=>{const f={};f.objectId=s();const h=s(),g=l[h];f.objectName=g.objectName,f.memberCount=g.memberCount,f.members=Yt(g.members),f.members.forEach(p=>{if(["SystemClass","StringArray","PrimitiveArray"].indexOf(p.type)>-1){const k=o();switch(k){case 9:p.refId=s();break;default:throw new Error(p.type+" <"+k+"> not handled")}}else if(p.type==="Primitive")switch(p.typeName){case"Single":p.value=c();break;case"Int32":p.value=s();break;default:throw console.log(p),new Error(p.typeName+" not handled")}else if(p.type==="String"){const k={};e++,k.type="BinaryObjectString",k.objectId=s(),k.value=i(),p.refId=k.objectId,l[k.objectId]=k}else throw new Error(p.type+" not handled")}),l[f.objectId]=f},E=()=>{const f=s(),h=s();l[f]={objectId:f,length:h,values:[]};for(let g=0;g<h;++g){const p=o();switch(p){case 6:const k={};k.type="BinaryObjectString",k.objectId=s(),k.value=i(),l[k.objectId]=k,l[f].values.push({refId:k.objectId});break;case 9:l[f].values.push({refId:s()});break;case 13:const w=o();g+=w-1;for(let j=0;j<w;++j)l[f].values.push({value:null});break;default:throw new Error("ArraySingleString <"+p+"> not handled")}}t[e]==9&&(e++,l[f].refId=s())},b=()=>{const f={};f.objectId=s(),f.binaryTypeEnum=o(),f.rank=s(),f.lengths=[];for(let h=0;h<f.rank;++h)f.lengths.push(s());f.typeEnum=["Primitive","String","Object","SystemClass","Class","ObjectArray","StringArray","PrimitiveArray"][o()],f.typeEnum==="PrimitiveArray"?f.arrayTypeEnum=He(o()):f.typeEnum==="Class"&&(f.name=i(),f.libraryId=s()),f.values=[],f.lengths.forEach(h=>{for(let g=0;g<h;++g){const p=o();switch(p){case 9:f.values.push({refId:s()});break;case 10:f.values.push({value:null});break;case 13:const k=o();g+=k-1;for(let w=0;w<k;++w)f.values.push({value:null});break;default:throw console.log(f),new Error("BinaryArray <"+p+"> not handled")}}}),l[f.objectId]=f},S=()=>{const f={};f.objectId=s(),f.length=s(),f.primitiveTypeEnum=He(o()),f.values=[];for(let h=0;h<f.length;++h)switch(f.primitiveTypeEnum){case"Single":f.values.push({value:c()});break;case"Int32":f.values.push({value:s()});break;default:throw new Error(f.primitiveTypeEnum+" not handled")}l[f.objectId]=f},_=()=>{const f=p=>{if(p.value!==void 0)return p.value;if(p.values)return p.values.map(k=>f(k));if(p.members){const k={};return p.members.forEach(w=>h(k,w)),k}return p.refId?f(l[p.refId]):p},h=(p,k)=>{if(k.value!==void 0)return p[k.name]=k.value;const w=l[k.refId];w.value?p[k.name]=w.value:w.values?p[k.name]=w.values.map(f):w.members?(p[k.name]={},w.members.forEach(j=>h(p[k.name],j))):w.refId&&h(p,l[w.refId])},g={};return l[1].members.forEach(p=>h(g,p)),{failed:!1,name:l[1].objectName,data:g,_debug:{metadata:n,objs:l}}};for(;e<t.length;){const f=o();try{switch(f){case 0:u();break;case 1:y();break;case 4:case 5:v(f===4);break;case 7:b();break;case 12:d();break;case 15:S();break;case 17:E();break;case 11:return _();default:return console.log("Unrecognized",e,"0x"+f.toString(16),n,l),{failed:!0,offset:e,_debug:{metadata:n,objs:l}}}}catch(h){return console.error(h),{failed:!0,offset:e,_debug:{metadata:n,objs:l}}}}return{failed:!0,offset:e,_debug:{metadata:n,objs:l}}},x=(t,e,n=!1)=>{const r=60/t*Math.max(0,e),o=String(Math.floor(r/60)),s=String(Math.floor(r%60)).padStart(2,"0");if(!n)return`${o}:${s}`;const i=String(Math.floor(r%1*1e3)).padStart(3,"0");return`${o}:${s}.${i}`};function vt(t,e,n){const l=t.slice();return l[3]=e[n],l}function xt(t){let e,n=t[3].measure+"",l,r;return{c(){e=L("text"),l=I(n),a(e,"class","measure svelte-hmwcyk"),a(e,"x",r=2+t[3].offset*t[0]),a(e,"y",20)},m(o,s){N(o,e,s),m(e,l)},p(o,s){s&1&&r!==(r=2+o[3].offset*o[0])&&a(e,"x",r)},d(o){o&&A(e)}}}function en(t){let e,n=t[3].offset+"",l,r,o,s,i=x(t[1].tempo,t[3].offset,!0)+"",c,u;return{c(){e=L("text"),l=I(n),o=z(),s=L("text"),c=I(i),a(e,"class","offset svelte-hmwcyk"),a(e,"x",r=2+t[3].offset*t[0]),a(e,"y",40),a(s,"class","timestamp svelte-hmwcyk"),a(s,"x",u=2+t[3].offset*t[0]),a(s,"y",60)},m(d,v){N(d,e,v),m(e,l),N(d,o,v),N(d,s,v),m(s,c)},p(d,v){v&1&&r!==(r=2+d[3].offset*d[0])&&a(e,"x",r),v&2&&i!==(i=x(d[1].tempo,d[3].offset,!0)+"")&&$(c,i),v&1&&u!==(u=2+d[3].offset*d[0])&&a(s,"x",u)},d(d){d&&A(e),d&&A(o),d&&A(s)}}}function gt(t){let e,n,l,r,o,s,i=t[3].measure&&xt(t),c=t[3].width>=2&&en(t);return{c(){e=L("line"),r=z(),i&&i.c(),o=z(),c&&c.c(),s=$e(),a(e,"x1",n=t[3].offset*t[0]),a(e,"x2",l=t[3].offset*t[0]),a(e,"y1",0),a(e,"y2",1e3),a(e,"stroke",t[3].color),a(e,"stroke-width",t[3].width)},m(u,d){N(u,e,d),N(u,r,d),i&&i.m(u,d),N(u,o,d),c&&c.m(u,d),N(u,s,d)},p(u,d){d&1&&n!==(n=u[3].offset*u[0])&&a(e,"x1",n),d&1&&l!==(l=u[3].offset*u[0])&&a(e,"x2",l),u[3].measure&&i.p(u,d),u[3].width>=2&&c.p(u,d)},d(u){u&&A(e),u&&A(r),i&&i.d(u),u&&A(o),c&&c.d(u),u&&A(s)}}}function tn(t){let e,n=t[2](),l=[];for(let r=0;r<n.length;r+=1)l[r]=gt(vt(t,n,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=$e()},m(r,o){for(let s=0;s<l.length;s+=1)l[s].m(r,o);N(r,e,o)},p(r,[o]){if(o&7){n=r[2]();let s;for(s=0;s<n.length;s+=1){const i=vt(r,n,s);l[s]?l[s].p(i,o):(l[s]=gt(i),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},i:O,o:O,d(r){Q(l,r),r&&A(e)}}}function nn(t,e,n){let{noteSpacing:l=150}=e,{chart:r}=e;const o=()=>{const s={};for(let i=0;i<=r.endpoint;i+=.25)s[i]={width:1,color:"#fff2",offset:i};for(let i=0;i<=r.endpoint;i+=.5)s[i]={width:1,color:"#fff6",offset:i};for(let i=0;i<r.endpoint;i+=1)s[i]={width:2,color:"#fff8",offset:i};for(let i=0;i<r.endpoint;i+=r.timesig)s[i]={width:3,color:"#fffa",offset:i,measure:1+i/r.timesig};return Object.values(s).sort((i,c)=>i.offset-c.offset)};return t.$$set=s=>{"noteSpacing"in s&&n(0,l=s.noteSpacing),"chart"in s&&n(1,r=s.chart)},[l,r,o]}class ln extends q{constructor(e){super(),J(this,e,nn,tn,K,{noteSpacing:0,chart:1})}}function bt(t,e,n){const l=t.slice();return l[8]=e[n][0],l[9]=e[n][1],l[10]=e[n][2],l[11]=e[n][3],l[12]=e[n][4],l[14]=n,l}function kt(t,e,n){const l=t.slice();return l[8]=e[n][0],l[9]=e[n][1],l[10]=e[n][2],l[11]=e[n][3],l[12]=e[n][4],l[14]=n,l}function yt(t){let e,n,l,r,o;return{c(){e=L("line"),a(e,"x1",n=t[3](t[8]+t[9],t[0])-3),a(e,"x2",l=t[3](t[8]+t[9],t[0])),a(e,"y1",r=t[4](t[12])),a(e,"y2",o=t[4](t[12])),a(e,"stroke","#fff"),a(e,"stroke-width",25),a(e,"stroke-linecap","round")},m(s,i){N(s,e,i)},p(s,i){i&5&&n!==(n=s[3](s[8]+s[9],s[0])-3)&&a(e,"x1",n),i&5&&l!==(l=s[3](s[8]+s[9],s[0]))&&a(e,"x2",l),i&4&&r!==(r=s[4](s[12]))&&a(e,"y1",r),i&4&&o!==(o=s[4](s[12]))&&a(e,"y2",o)},d(s){s&&A(e)}}}function wt(t){let e,n,l=(!t[2].notes[t[14]+1]||t[8]+t[9]+ze<t[2].notes[t[14]+1][0])&&yt(t);return{c(){l&&l.c(),e=L("path"),a(e,"fill","none"),a(e,"stroke","#fff"),a(e,"stroke-width",25),a(e,"stroke-linecap","butt"),a(e,"d",n=t[11]?t[6](t[8],t[9],t[10],t[11],t[12]):`M${t[3](t[8],t[0])},${t[4](t[10])} l${t[5](t[9],t[0])},0`)},m(r,o){l&&l.m(r,o),N(r,e,o)},p(r,o){!r[2].notes[r[14]+1]||r[8]+r[9]+ze<r[2].notes[r[14]+1][0]?l?l.p(r,o):(l=yt(r),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),o&5&&n!==(n=r[11]?r[6](r[8],r[9],r[10],r[11],r[12]):`M${r[3](r[8],r[0])},${r[4](r[10])} l${r[5](r[9],r[0])},0`)&&a(e,"d",n)},d(r){l&&l.d(r),r&&A(e)}}}function St(t){let e,n,l;return{c(){e=L("path"),a(e,"fill","none"),a(e,"marker-start",n=t[2].notes[t[14]-1]&&t[2].notes[t[14]-1][0]+t[2].notes[t[14]-1][1]+ze>=t[8]?"url(#note-mid)":"url(#note-start)"),a(e,"stroke","#5566aa"),a(e,"stroke-width",20),a(e,"stroke-linecap","round"),a(e,"d",l=t[11]?t[6](t[8],t[9],t[10],t[11],t[12]):`M${t[3](t[8],t[0])},${t[4](t[10])} l${t[5](t[9],t[0])},0`)},m(r,o){N(r,e,o)},p(r,o){o&4&&n!==(n=r[2].notes[r[14]-1]&&r[2].notes[r[14]-1][0]+r[2].notes[r[14]-1][1]+ze>=r[8]?"url(#note-mid)":"url(#note-start)")&&a(e,"marker-start",n),o&5&&l!==(l=r[11]?r[6](r[8],r[9],r[10],r[11],r[12]):`M${r[3](r[8],r[0])},${r[4](r[10])} l${r[5](r[9],r[0])},0`)&&a(e,"d",l)},d(r){r&&A(e)}}}function rn(t){let e,n,l,r,o,s,i,c,u,d;i=new ln({props:{noteSpacing:t[0],chart:t[2]}});let v=t[2].notes,y=[];for(let S=0;S<v.length;S+=1)y[S]=wt(kt(t,v,S));let E=t[2].notes,b=[];for(let S=0;S<E.length;S+=1)b[S]=St(bt(t,E,S));return{c(){e=L("svg"),n=L("defs"),l=L("marker"),r=L("circle"),o=L("marker"),s=L("circle"),Z(i.$$.fragment);for(let S=0;S<y.length;S+=1)y[S].c();c=$e();for(let S=0;S<b.length;S+=1)b[S].c();a(r,"cx",50),a(r,"cy",50),a(r,"r",45),a(r,"stroke","#fff"),a(r,"stroke-width",10),a(r,"fill","#5566aa"),a(l,"id","note-start"),a(l,"refX",50),a(l,"refY",50),a(l,"markerHeight",2),a(l,"markerWidth",2),a(l,"viewBox","0 0 100 100"),a(s,"cx",50),a(s,"cy",50),a(s,"r",10),a(s,"stroke","#fff"),a(s,"stroke-width",5),a(s,"fill","#5566aa"),a(o,"id","note-mid"),a(o,"refX",50),a(o,"refY",50),a(o,"markerHeight",2),a(o,"markerWidth",2),a(o,"viewBox","0 0 100 100"),a(e,"class","note-container svelte-2uaize"),a(e,"viewBox",u=`${t[3](t[1],t[0])-102} 0 3000 1000`)},m(S,_){N(S,e,_),m(e,n),m(n,l),m(l,r),m(n,o),m(o,s),H(i,e,null);for(let f=0;f<y.length;f+=1)y[f].m(e,null);m(e,c);for(let f=0;f<b.length;f+=1)b[f].m(e,null);d=!0},p(S,[_]){const f={};if(_&1&&(f.noteSpacing=S[0]),_&4&&(f.chart=S[2]),i.$set(f),_&125){v=S[2].notes;let h;for(h=0;h<v.length;h+=1){const g=kt(S,v,h);y[h]?y[h].p(g,_):(y[h]=wt(g),y[h].c(),y[h].m(e,c))}for(;h<y.length;h+=1)y[h].d(1);y.length=v.length}if(_&125){E=S[2].notes;let h;for(h=0;h<E.length;h+=1){const g=bt(S,E,h);b[h]?b[h].p(g,_):(b[h]=St(g),b[h].c(),b[h].m(e,null))}for(;h<b.length;h+=1)b[h].d(1);b.length=E.length}(!d||_&3&&u!==(u=`${S[3](S[1],S[0])-102} 0 3000 1000`))&&a(e,"viewBox",u)},i(S){d||(D(i.$$.fragment,S),d=!0)},o(S){U(i.$$.fragment,S),d=!1},d(S){S&&A(e),V(i),Q(y,S),Q(b,S)}}}const Et=2.4,ze=.001;function sn(t,e,n){let{noteSpacing:l=150}=e,{offset:r=0}=e,{chart:o}=e;const s=Et/2,i=(v,y)=>v*y,c=v=>500-v*Et,u=(v,y)=>v*y,d=(v,y,E,b,S)=>{const _=`M${i(v,l)},${c(E)}`,f=`s${u(y,l)/4},0 ${u(y,l)/2},${-b*s}`,h=`s${u(y,l)/2},${-b*s} ${u(y,l)/2},${-b*s}`;return`${_} ${f} ${h}`};return t.$$set=v=>{"noteSpacing"in v&&n(0,l=v.noteSpacing),"offset"in v&&n(1,r=v.offset),"chart"in v&&n(2,o=v.chart)},[l,r,o,i,c,u,d]}class on extends q{constructor(e){super(),J(this,e,sn,rn,K,{noteSpacing:0,offset:1,chart:2})}}const an=[{name:"C3",pitch:48,octave:!0},{name:"C#3",pitch:49,sharp:!0},{name:"D3",pitch:50},{name:"D#3",pitch:51,sharp:!0},{name:"E3",pitch:52},{name:"F3",pitch:53},{name:"F#3",pitch:54,sharp:!0},{name:"G3",pitch:55},{name:"G#3",pitch:56,sharp:!0},{name:"A3",pitch:57},{name:"A#3",pitch:58,sharp:!0},{name:"B3",pitch:59},{name:"C4",pitch:60,octave:!0},{name:"C#4",pitch:61,sharp:!0},{name:"D4",pitch:62},{name:"D#4",pitch:63,sharp:!0},{name:"E4",pitch:64},{name:"F4",pitch:65},{name:"F#4",pitch:66,sharp:!0},{name:"G4",pitch:67},{name:"G#4",pitch:68,sharp:!0},{name:"A4",pitch:69},{name:"A#4",pitch:70,sharp:!0},{name:"B4",pitch:71},{name:"C5",pitch:72,octave:!0}],Ie=an.sort((t,e)=>e.pitch-t.pitch);function Ct(t,e,n){const l=t.slice();return l[0]=e[n],l}function It(t,e,n){const l=t.slice();return l[0]=e[n],l}function jt(t){let e;return{c(){e=C("div"),a(e,"class","pitch svelte-5gtemr"),_t(e,"sharp",t[0].sharp),_t(e,"octave",t[0].octave)},m(n,l){N(n,e,l)},p:O,d(n){n&&A(e)}}}function At(t){let e,n=t[0].name+"",l;return{c(){e=C("div"),l=I(n),a(e,"class","text svelte-5gtemr")},m(r,o){N(r,e,o),m(e,l)},p:O,d(r){r&&A(e)}}}function fn(t){let e,n,l,r=Ie,o=[];for(let c=0;c<r.length;c+=1)o[c]=jt(It(t,r,c));let s=Ie,i=[];for(let c=0;c<s.length;c+=1)i[c]=At(Ct(t,s,c));return{c(){e=C("div");for(let c=0;c<o.length;c+=1)o[c].c();n=z(),l=C("div");for(let c=0;c<i.length;c+=1)i[c].c();a(e,"class","vertical-grid svelte-5gtemr"),a(l,"class","note-names svelte-5gtemr")},m(c,u){N(c,e,u);for(let d=0;d<o.length;d+=1)o[d].m(e,null);N(c,n,u),N(c,l,u);for(let d=0;d<i.length;d+=1)i[d].m(l,null)},p(c,[u]){if(u&0){r=Ie;let d;for(d=0;d<r.length;d+=1){const v=It(c,r,d);o[d]?o[d].p(v,u):(o[d]=jt(v),o[d].c(),o[d].m(e,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=r.length}if(u&0){s=Ie;let d;for(d=0;d<s.length;d+=1){const v=Ct(c,s,d);i[d]?i[d].p(v,u):(i[d]=At(v),i[d].c(),i[d].m(l,null))}for(;d<i.length;d+=1)i[d].d(1);i.length=s.length}},i:O,o:O,d(c){c&&A(e),Q(o,c),c&&A(n),c&&A(l),Q(i,c)}}}class un extends q{constructor(e){super(),J(this,e,null,fn,K,{})}}function Nt(t,e,n){const l=t.slice();return l[10]=e[n].width,l[11]=e[n].color,l}function zt(t){let e;return{c(){e=C("div"),a(e,"class","beatline svelte-1p6kpfk"),Y(e,"border-width",t[10]),Y(e,"border-color",t[11])},m(n,l){N(n,e,l)},p:O,d(n){n&&A(e)}}}function cn(t){let e,n,l,r=Math.max(0,t[0]).toFixed(2)+"",o,s,i=t[1].endpoint+"",c,u,d,v=x(t[1].tempo,t[0],!0)+"",y,E,b,S,_,f,h,g=t[4](),p=[];for(let k=0;k<g.length;k+=1)p[k]=zt(Nt(t,g,k));return{c(){e=C("div"),n=C("div"),l=C("div"),o=I(r),s=I("/"),c=I(i),u=z(),d=C("div"),y=I(v),E=z(),b=C("div");for(let k=0;k<p.length;k+=1)p[k].c();S=z(),_=C("div"),a(n,"class","info svelte-1p6kpfk"),a(_,"class","position svelte-1p6kpfk"),Y(_,"left",`${100*Math.max(0,t[0])/t[1].endpoint}%`),Y(_,"width",`${Math.max(3,2e4/t[1].endpoint)}px`),a(b,"class","seeker svelte-1p6kpfk"),a(e,"class","seeker-container svelte-1p6kpfk")},m(k,w){N(k,e,w),m(e,n),m(n,l),m(l,o),m(l,s),m(l,c),m(n,u),m(n,d),m(d,y),m(e,E),m(e,b);for(let j=0;j<p.length;j+=1)p[j].m(b,null);m(b,S),m(b,_),t[6](e),f||(h=P(e,"mousedown",t[3]),f=!0)},p(k,[w]){if(w&1&&r!==(r=Math.max(0,k[0]).toFixed(2)+"")&&$(o,r),w&2&&i!==(i=k[1].endpoint+"")&&$(c,i),w&3&&v!==(v=x(k[1].tempo,k[0],!0)+"")&&$(y,v),w&16){g=k[4]();let j;for(j=0;j<g.length;j+=1){const M=Nt(k,g,j);p[j]?p[j].p(M,w):(p[j]=zt(M),p[j].c(),p[j].m(b,S))}for(;j<p.length;j+=1)p[j].d(1);p.length=g.length}w&3&&Y(_,"left",`${100*Math.max(0,k[0])/k[1].endpoint}%`),w&2&&Y(_,"width",`${Math.max(3,2e4/k[1].endpoint)}px`)},i:O,o:O,d(k){k&&A(e),Q(p,k),t[6](null),f=!1,h()}}}function dn(t,e,n){let{offset:l=0}=e,{chart:r}=e,{onSeek:o=()=>{}}=e,s;const i=E=>{if(E<95)return o(-2);const b=Math.min(1,(E-95)/(s.clientWidth-95));o(b*r.endpoint)},c=E=>{E.preventDefault();const{clientX:b}=E;window.requestAnimationFrame(()=>i(b))},u=E=>{const{clientX:b}=E;i(b),window.addEventListener("mousemove",c),window.addEventListener("mouseup",d)},d=()=>{window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",d)},v=()=>{const E={};for(let b=0;b<r.endpoint;b+=r.timesig*10)E[b]={offset:b,width:"1px",color:"#fff3"};for(let b=0;b<r.endpoint;b+=r.timesig*100)E[b]={offset:b,width:"2px",color:"#fff6"};return Object.values(E).sort((b,S)=>b.offset-S.offset)};function y(E){Ne[E?"unshift":"push"](()=>{s=E,n(2,s)})}return t.$$set=E=>{"offset"in E&&n(0,l=E.offset),"chart"in E&&n(1,r=E.chart),"onSeek"in E&&n(5,o=E.onSeek)},[l,r,s,u,v,o,y]}class mn extends q{constructor(e){super(),J(this,e,dn,cn,K,{offset:0,chart:1,onSeek:5})}}function hn(t){let e,n,l,r,o,s,i,c,u,d;return{c(){e=C("div"),n=C("div"),n.textContent="\u{1F50D}",l=z(),r=C("input"),o=z(),s=C("div"),i=I(t[0]),c=I("%"),a(n,"class","label"),a(r,"type","range"),a(r,"step",5),a(r,"min",10),a(r,"max",200),a(s,"class","value svelte-cq1nv8"),a(e,"class","zoomer svelte-cq1nv8")},m(v,y){N(v,e,y),m(e,n),m(e,l),m(e,r),pt(r,t[0]),m(e,o),m(e,s),m(s,i),m(s,c),u||(d=[P(r,"change",t[3]),P(r,"input",t[3]),P(r,"change",t[1])],u=!0)},p(v,[y]){y&1&&pt(r,v[0]),y&1&&$(i,v[0])},i:O,o:O,d(v){v&&A(e),u=!1,W(d)}}}function pn(t,e,n){let{value:l=100}=e,{onChange:r=()=>{}}=e;const o=i=>{const c=i.target;r(Number(c.value))};function s(){l=Lt(this.value),n(0,l)}return t.$$set=i=>{"value"in i&&n(0,l=i.value),"onChange"in i&&n(2,r=i.onChange)},[l,o,r,s]}class _n extends q{constructor(e){super(),J(this,e,pn,hn,K,{value:0,onChange:2})}}function vn(t){let e,n,l=t[0].author+"",r,o,s=t[0].name+"",i,c,u,d,v=t[0].tempo+"",y,E,b=t[0].timesig+"",S,_,f=x(t[0].tempo,t[0].endpoint)+"",h,g,p,k,w;return{c(){e=C("div"),n=C("div"),r=I(l),o=I(" - "),i=I(s),c=z(),u=C("div"),d=I("\u2669 = "),y=I(v),E=I(" | "),S=I(b),_=I("/4 | "),h=I(f),g=I(" | "),p=C("a"),p.textContent="See more",a(n,"class","title"),a(p,"href","javascript:void(0)"),a(p,"class","svelte-hz6umn"),a(u,"class","tempo"),a(e,"class","metadata svelte-hz6umn")},m(j,M){N(j,e,M),m(e,n),m(n,r),m(n,o),m(n,i),m(e,c),m(e,u),m(u,d),m(u,y),m(u,E),m(u,S),m(u,_),m(u,h),m(u,g),m(u,p),k||(w=P(p,"click",t[2]),k=!0)},p(j,M){M&1&&l!==(l=j[0].author+"")&&$(r,l),M&1&&s!==(s=j[0].name+"")&&$(i,s),M&1&&v!==(v=j[0].tempo+"")&&$(y,v),M&1&&b!==(b=j[0].timesig+"")&&$(S,b),M&1&&f!==(f=x(j[0].tempo,j[0].endpoint)+"")&&$(h,f)},d(j){j&&A(e),k=!1,w()}}}function gn(t){let e,n,l,r,o,s,i=t[0].author+"",c,u,d,v,y,E,b=t[0].name+"",S,_,f,h,g,p,k=t[0].description+"",w,j,M,he,R=t[0].shortName+"",F,pe,ee,qe,_e=t[0].trackRef+"",Me,Xe,te,Ye,ve=t[0].genre+"",Oe,Ze,ne,Qe,ge=t[0].year+"",Te,xe,le,et,be=t[0].difficulty+"",Be,tt,re,nt,ke=t[0].savednotespacing+"",Le,lt,se,rt,ye=t[0].tempo+"",Pe,st,oe,ot,we=t[0].timesig+"",Fe,it,ie,at,Se=t[0].endpoint+"",De,ft,ae,ut,Ee=t[0].UNK1+"",Re,ct,fe,dt,X,Ue,mt;return{c(){e=C("div"),n=C("ul"),l=C("li"),r=C("div"),r.textContent="author",o=z(),s=C("div"),c=I(i),u=z(),d=C("li"),v=C("div"),v.textContent="name",y=z(),E=C("div"),S=I(b),_=z(),f=C("li"),h=C("div"),h.textContent="description",g=z(),p=C("div"),w=I(k),j=z(),M=C("li"),he=I("shortName = "),F=I(R),pe=z(),ee=C("li"),qe=I("trackRef = "),Me=I(_e),Xe=z(),te=C("li"),Ye=I("genre = "),Oe=I(ve),Ze=z(),ne=C("li"),Qe=I("year = "),Te=I(ge),xe=z(),le=C("li"),et=I("difficulty = "),Be=I(be),tt=z(),re=C("li"),nt=I("savednotespacing = "),Le=I(ke),lt=z(),se=C("li"),rt=I("tempo = "),Pe=I(ye),st=z(),oe=C("li"),ot=I("timesig = "),Fe=I(we),it=z(),ie=C("li"),at=I("endpoint = "),De=I(Se),ft=z(),ae=C("li"),ut=I("UNK1 = "),Re=I(Ee),ct=z(),fe=C("li"),dt=C("br"),X=C("a"),X.textContent="Hide details",a(r,"class","metadata-label"),a(s,"class","metadata-value svelte-hz6umn"),a(l,"class","svelte-hz6umn"),a(v,"class","metadata-label"),a(E,"class","metadata-value svelte-hz6umn"),a(d,"class","svelte-hz6umn"),a(h,"class","metadata-label"),a(p,"class","metadata-value svelte-hz6umn"),a(f,"class","svelte-hz6umn"),a(M,"class","svelte-hz6umn"),a(ee,"class","svelte-hz6umn"),a(te,"class","svelte-hz6umn"),a(ne,"class","svelte-hz6umn"),a(le,"class","svelte-hz6umn"),a(re,"class","svelte-hz6umn"),a(se,"class","svelte-hz6umn"),a(oe,"class","svelte-hz6umn"),a(ie,"class","svelte-hz6umn"),a(ae,"class","svelte-hz6umn"),a(X,"href","javascript:void(0)"),a(X,"class","svelte-hz6umn"),a(fe,"class","svelte-hz6umn"),a(n,"class","metadata-list svelte-hz6umn"),a(e,"class","metadata-details svelte-hz6umn")},m(T,B){N(T,e,B),m(e,n),m(n,l),m(l,r),m(l,o),m(l,s),m(s,c),m(n,u),m(n,d),m(d,v),m(d,y),m(d,E),m(E,S),m(n,_),m(n,f),m(f,h),m(f,g),m(f,p),m(p,w),m(n,j),m(n,M),m(M,he),m(M,F),m(n,pe),m(n,ee),m(ee,qe),m(ee,Me),m(n,Xe),m(n,te),m(te,Ye),m(te,Oe),m(n,Ze),m(n,ne),m(ne,Qe),m(ne,Te),m(n,xe),m(n,le),m(le,et),m(le,Be),m(n,tt),m(n,re),m(re,nt),m(re,Le),m(n,lt),m(n,se),m(se,rt),m(se,Pe),m(n,st),m(n,oe),m(oe,ot),m(oe,Fe),m(n,it),m(n,ie),m(ie,at),m(ie,De),m(n,ft),m(n,ae),m(ae,ut),m(ae,Re),m(n,ct),m(n,fe),m(fe,dt),m(fe,X),Ue||(mt=P(X,"click",t[2]),Ue=!0)},p(T,B){B&1&&i!==(i=T[0].author+"")&&$(c,i),B&1&&b!==(b=T[0].name+"")&&$(S,b),B&1&&k!==(k=T[0].description+"")&&$(w,k),B&1&&R!==(R=T[0].shortName+"")&&$(F,R),B&1&&_e!==(_e=T[0].trackRef+"")&&$(Me,_e),B&1&&ve!==(ve=T[0].genre+"")&&$(Oe,ve),B&1&&ge!==(ge=T[0].year+"")&&$(Te,ge),B&1&&be!==(be=T[0].difficulty+"")&&$(Be,be),B&1&&ke!==(ke=T[0].savednotespacing+"")&&$(Le,ke),B&1&&ye!==(ye=T[0].tempo+"")&&$(Pe,ye),B&1&&we!==(we=T[0].timesig+"")&&$(Fe,we),B&1&&Se!==(Se=T[0].endpoint+"")&&$(De,Se),B&1&&Ee!==(Ee=T[0].UNK1+"")&&$(Re,Ee)},d(T){T&&A(e),Ue=!1,mt()}}}function bn(t){let e;function n(o,s){return o[1]?gn:vn}let l=n(t),r=l(t);return{c(){r.c(),e=$e()},m(o,s){r.m(o,s),N(o,e,s)},p(o,[s]){l===(l=n(o))&&r?r.p(o,s):(r.d(1),r=l(o),r&&(r.c(),r.m(e.parentNode,e)))},i:O,o:O,d(o){r.d(o),o&&A(e)}}}function kn(t,e,n){let{chart:l}=e,r=!1;const o=()=>{n(1,r=!r)};return t.$$set=s=>{"chart"in s&&n(0,l=s.chart)},[l,r,o]}class yn extends q{constructor(e){super(),J(this,e,kn,bn,K,{chart:0})}}function $t(t){let e;return{c(){e=C("div"),a(e,"class","dragover-overlay svelte-17cf605")},m(n,l){N(n,e,l)},d(n){n&&A(e)}}}function wn(t){let e,n,l,r,o;function s(u,d){return u[0]?In:u[2]?Cn:En}let i=s(t),c=i(t);return{c(){e=C("label"),c.c(),n=z(),l=C("input"),a(l,"id","file-input"),a(l,"type","file"),a(e,"class","instructions svelte-17cf605"),a(e,"for","file-input")},m(u,d){N(u,e,d),c.m(e,null),m(e,n),m(e,l),r||(o=P(l,"change",t[8]),r=!0)},p(u,d){i!==(i=s(u))&&(c.d(1),c=i(u),c&&(c.c(),c.m(e,n)))},i:O,o:O,d(u){u&&A(e),c.d(),r=!1,o()}}}function Sn(t){let e,n,l,r,o,s,i,c,u,d,v,y,E;e=new mn({props:{offset:t[5],chart:t[6],onSeek:t[11]}}),l=new on({props:{noteSpacing:t[3],offset:t[5],chart:t[6]}}),o=new yn({props:{chart:t[6]}});function b(_){t[13](_)}let S={onChange:t[12]};return t[4]!==void 0&&(S.value=t[4]),i=new _n({props:S}),Ne.push(()=>Kt(i,"value",b)),{c(){Z(e.$$.fragment),n=z(),Z(l.$$.fragment),r=z(),Z(o.$$.fragment),s=z(),Z(i.$$.fragment),u=z(),d=C("button"),d.textContent="\u{1F5D1}\uFE0F",a(d,"class","unload svelte-17cf605"),a(d,"title","Unload the chart")},m(_,f){H(e,_,f),N(_,n,f),H(l,_,f),N(_,r,f),H(o,_,f),N(_,s,f),H(i,_,f),N(_,u,f),N(_,d,f),v=!0,y||(E=P(d,"click",t[7]),y=!0)},p(_,f){const h={};f&32&&(h.offset=_[5]),f&64&&(h.chart=_[6]),e.$set(h);const g={};f&8&&(g.noteSpacing=_[3]),f&32&&(g.offset=_[5]),f&64&&(g.chart=_[6]),l.$set(g);const p={};f&64&&(p.chart=_[6]),o.$set(p);const k={};!c&&f&16&&(c=!0,k.value=_[4],Gt(()=>c=!1)),i.$set(k)},i(_){v||(D(e.$$.fragment,_),D(l.$$.fragment,_),D(o.$$.fragment,_),D(i.$$.fragment,_),v=!0)},o(_){U(e.$$.fragment,_),U(l.$$.fragment,_),U(o.$$.fragment,_),U(i.$$.fragment,_),v=!1},d(_){V(e,_),_&&A(n),V(l,_),_&&A(r),V(o,_),_&&A(s),V(i,_),_&&A(u),_&&A(d),y=!1,E()}}}function En(t){let e;return{c(){e=C("p"),e.textContent="Drag a .tmb file here or click to upload"},m(n,l){N(n,e,l)},d(n){n&&A(e)}}}function Cn(t){let e;return{c(){e=C("p"),e.textContent="Loading failed! Are you sure this is a valid .tmb file?"},m(n,l){N(n,e,l)},d(n){n&&A(e)}}}function In(t){let e;return{c(){e=C("p"),e.textContent="Loading..."},m(n,l){N(n,e,l)},d(n){n&&A(e)}}}function jn(t){let e,n,l,r,o,s,i,c,u,d,v,y=t[1]&&$t();l=new un({});const E=[Sn,wn],b=[];function S(_,f){return _[6]?0:1}return i=S(t),c=b[i]=E[i](t),{c(){e=C("main"),y&&y.c(),n=z(),Z(l.$$.fragment),r=z(),o=C("div"),s=z(),c.c(),a(o,"class","strikeline svelte-17cf605"),a(e,"class","svelte-17cf605")},m(_,f){N(_,e,f),y&&y.m(e,null),m(e,n),H(l,e,null),m(e,r),m(e,o),m(e,s),b[i].m(e,null),u=!0,d||(v=[P(e,"dragover",t[14]),P(e,"drop",t[9]),P(e,"wheel",t[10])],d=!0)},p(_,[f]){_[1]?y||(y=$t(),y.c(),y.m(e,n)):y&&(y.d(1),y=null);let h=i;i=S(_),i===h?b[i].p(_,f):(Vt(),U(b[h],1,1,()=>{b[h]=null}),Wt(),c=b[i],c?c.p(_,f):(c=b[i]=E[i](_),c.c()),D(c,1),c.m(e,null))},i(_){u||(D(l.$$.fragment,_),D(c),u=!0)},o(_){U(l.$$.fragment,_),U(c),u=!1},d(_){_&&A(e),y&&y.d(),V(l),b[i].d(),d=!1,W(v)}}}let ue=.5;function An(t,e,n){let l=!1,r=!1,o=!1,s=200,i=100,c=0,u=null;const d=w=>{n(0,l=!0);const j=new FileReader;w.name.endsWith(".tmb")?(j.onload=M=>{const he=M.target.result,R=new Uint8Array(he);if(String.fromCharCode(R[0])=="{")n(6,u=JSON.parse(String.fromCharCode(...R)));else{const F=Qt(R);if(F.failed)throw n(2,o=!0),n(0,l=!1),new Error("File is not a JSON, and NRBF parsing failed");n(6,u={author:"Trombone Champ",name:w.name.split(".")[0],description:"Base game .tmb (not a JSON)",shortName:w.name.split(".")[0],trackRef:w.name.split(".")[0],genre:"?",year:"?",difficulty:-1,savednotespacing:F.data.savednotespacing,tempo:F.data.tempo,timesig:F.data.timesig,endpoint:F.data.endpoint,UNK1:0,notes:F.data.savedleveldata._items.filter(pe=>pe)})}n(6,u.timesig=Number(u.timesig),u),n(3,s=u.savednotespacing*(i/100)*2.4),console.log(u),n(5,c=-1)},j.readAsArrayBuffer(w)):n(2,o=!0),n(0,l=!1)},v=()=>{n(6,u=null),n(2,o=!1),n(0,l=!1)},y=w=>{if(!(!w.target.files||!w.target.files.length))for(const j of w.target.files)d(j)},E=w=>{if(w.preventDefault(),n(1,r=!1),!(!w.dataTransfer.items||!w.dataTransfer.items.length))for(const j of w.dataTransfer.items)d(j.getAsFile())},b=()=>{const w=c%ue;n(5,c=Math.max(-1,c-(w||ue)))},S=()=>{const w=c%ue;n(5,c=Math.min(u.endpoint-1,c+(w?ue-w:ue)))},_=w=>{w.preventDefault(),u&&(w.deltaY>0?S():b())},f=w=>{switch(w.key){case"ArrowRight":S();break;case"ArrowLeft":b();break}},h=w=>{!u||n(5,c=w)},g=w=>{n(3,s=u.savednotespacing*(w/100)*2.4)};Dt(()=>window.addEventListener("keydown",f));function p(w){i=w,n(4,i)}return[l,r,o,s,i,c,u,v,y,E,_,h,g,p,w=>{w.preventDefault(),n(1,r=!0)}]}class Nn extends q{constructor(e){super(),J(this,e,An,jn,K,{})}}new Nn({target:document.getElementById("app")});
